<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Prepare data for model calibration with user-prepared calibration data — prepare_user_data • kuenm2</title><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js" integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g==" crossorigin="anonymous" referrerpolicy="no-referrer"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/cosmo/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><meta property="og:title" content="Prepare data for model calibration with user-prepared calibration data — prepare_user_data"><meta property="og:description" content="This function prepares data for model calibration using user-prepared
calibration data. It includes optional PCA, k-fold partitioning, and the
creation of a grid parameter combinations, including distinct regularization
multiplier values, various feature classes, and different sets of
environmental variables."><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body data-spy="scroll" data-target="#toc">


    <div class="container template-reference-topic">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">kuenm2</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.0.10</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../index.html">
    <span class="fa fa-home"></span>

  </a>
</li>
<li>
  <a href="../reference/index.html">Functions</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    <span class="fas fa-book"></span>

    Articles

    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu"><li>
      <a href="../articles/basic_bata_cleaning.html">1. Occurrence Data Cleaning</a>
    </li>
    <li>
      <a href="../articles/prepare_data.html">2. Prepare Data for Model Calibration</a>
    </li>
    <li>
      <a href="../articles/model_calibration.html">3. Model Calibration</a>
    </li>
    <li>
      <a href="../articles/model_exploration.html">4. Fit and Explore Selected Models</a>
    </li>
    <li>
      <a href="../articles/model_predictions.html">5. Predict models to single scenario</a>
    </li>
    <li>
      <a href="../articles/model_projections.html">6. Project models to multiple scenarios</a>
    </li>
  </ul></li>
      </ul><ul class="nav navbar-nav navbar-right"></ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->



      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Prepare data for model calibration with user-prepared calibration data</h1>

    <div class="hidden name"><code>prepare_user_data.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>This function prepares data for model calibration using user-prepared
calibration data. It includes optional PCA, k-fold partitioning, and the
creation of a grid parameter combinations, including distinct regularization
multiplier values, various feature classes, and different sets of
environmental variables.</p>
    </div>

    <div id="ref-usage">
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">prepare_user_data</span><span class="op">(</span><span class="va">algorithm</span>, <span class="va">user_data</span>, <span class="va">pr_bg</span>, species <span class="op">=</span> <span class="cn">NULL</span>, x <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>                  y <span class="op">=</span> <span class="cn">NULL</span>, features <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"lq"</span>, <span class="st">"lqp"</span><span class="op">)</span>,</span>
<span>                  r_multiplier <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0.1</span>, <span class="fl">0.5</span>, <span class="fl">1</span>, <span class="fl">2</span>, <span class="fl">3</span><span class="op">)</span>, kfolds <span class="op">=</span> <span class="fl">4</span>,</span>
<span>                  user_folds <span class="op">=</span> <span class="cn">NULL</span>, categorical_variables <span class="op">=</span> <span class="cn">NULL</span>, do_pca <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>                  center <span class="op">=</span> <span class="cn">TRUE</span>, scale <span class="op">=</span> <span class="cn">TRUE</span>, exclude_from_pca <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>                  variance_explained <span class="op">=</span> <span class="fl">95</span>, min_explained <span class="op">=</span> <span class="fl">5</span>,</span>
<span>                  min_number <span class="op">=</span> <span class="fl">2</span>, min_continuous <span class="op">=</span> <span class="cn">NULL</span>, weights <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>                  include_xy <span class="op">=</span> <span class="cn">TRUE</span>, write_pca <span class="op">=</span> <span class="cn">FALSE</span>, pca_directory <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>                  write_file <span class="op">=</span> <span class="cn">FALSE</span>, file_name <span class="op">=</span> <span class="cn">NULL</span>, seed <span class="op">=</span> <span class="fl">1</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div id="arguments">
    <h2>Arguments</h2>


<dl><dt id="arg-algorithm">algorithm<a class="anchor" aria-label="anchor" href="#arg-algorithm"></a></dt>
<dd><p>(character) modeling algorithm, either "glm" or "maxnet".</p></dd>


<dt id="arg-user-data">user_data<a class="anchor" aria-label="anchor" href="#arg-user-data"></a></dt>
<dd><p>(data frame) A data.frame with a column with presence (1)
and background (0) records, together with variable values (one variable per
column). See an example with <code>data("user_data", package = "kuenm2")</code>.</p></dd>


<dt id="arg-pr-bg">pr_bg<a class="anchor" aria-label="anchor" href="#arg-pr-bg"></a></dt>
<dd><p>(character) the name of the column in <code>user_data</code> that contains
the presence/background records.</p></dd>


<dt id="arg-species">species<a class="anchor" aria-label="anchor" href="#arg-species"></a></dt>
<dd><p>(character) string specifying the species name (optional).
Default is NULL.</p></dd>


<dt id="arg-x">x<a class="anchor" aria-label="anchor" href="#arg-x"></a></dt>
<dd><p>(character) a string specifying the name of the column in <code>user_data</code>
that contains the longitude values. Default is NULL. Must be defined if
present in <code>user_data</code> otherwise it will be considered as another predictor
variable.</p></dd>


<dt id="arg-y">y<a class="anchor" aria-label="anchor" href="#arg-y"></a></dt>
<dd><p>(character) a string specifying the name of the column in <code>user_data</code>
that contains the latitude values. Default is NULL. Must be defined if
present in <code>user_data</code> otherwise it will be considered as another predictor
variable.</p></dd>


<dt id="arg-features">features<a class="anchor" aria-label="anchor" href="#arg-features"></a></dt>
<dd><p>(character) a vector of feature classes. Default is c("q",
"lq", "lp", "qp", "lqp").</p></dd>


<dt id="arg-r-multiplier">r_multiplier<a class="anchor" aria-label="anchor" href="#arg-r-multiplier"></a></dt>
<dd><p>(numeric) a vector of regularization parameters for maxnet.
Default is c(0.1, 1, 2, 3, 5).</p></dd>


<dt id="arg-kfolds">kfolds<a class="anchor" aria-label="anchor" href="#arg-kfolds"></a></dt>
<dd><p>(numeric) the number of groups (folds) the occurrence
data will be split into for cross-validation. Default is 4.</p></dd>


<dt id="arg-user-folds">user_folds<a class="anchor" aria-label="anchor" href="#arg-user-folds"></a></dt>
<dd><p>a user provided list with folds for cross-validation to be
used in model calibration. Each element of the list contains indices to split
<code>use_data</code> into training and testing sets.</p></dd>


<dt id="arg-categorical-variables">categorical_variables<a class="anchor" aria-label="anchor" href="#arg-categorical-variables"></a></dt>
<dd><p>(character) names of the variables that are
categorical. Default is NULL.</p></dd>


<dt id="arg-do-pca">do_pca<a class="anchor" aria-label="anchor" href="#arg-do-pca"></a></dt>
<dd><p>(logical) whether to perform a principal component analysis
(PCA) with the set of variables. Default is FALSE.</p></dd>


<dt id="arg-center">center<a class="anchor" aria-label="anchor" href="#arg-center"></a></dt>
<dd><p>(logical) whether the variables should be zero-centered. Default
is TRUE.</p></dd>


<dt id="arg-scale">scale<a class="anchor" aria-label="anchor" href="#arg-scale"></a></dt>
<dd><p>(logical) whether the variables should be scaled to have unit
variance before the analysis takes place. Default is FALSE.</p></dd>


<dt id="arg-exclude-from-pca">exclude_from_pca<a class="anchor" aria-label="anchor" href="#arg-exclude-from-pca"></a></dt>
<dd><p>(character) variable names within raster_variables
that should not be included in the PCA transformation. Instead, these
variables will be added directly to the final set of output variables
without being modified. The default is NULL, meaning all variables
will be used unless specified otherwise.</p></dd>


<dt id="arg-variance-explained">variance_explained<a class="anchor" aria-label="anchor" href="#arg-variance-explained"></a></dt>
<dd><p>(numeric) the cumulative percentage of total
variance that must be explained by the selected principal components.
Default is 95.</p></dd>


<dt id="arg-min-explained">min_explained<a class="anchor" aria-label="anchor" href="#arg-min-explained"></a></dt>
<dd><p>(numeric) the minimum percentage of total variance that
a principal component must explain to be retained. Default is 5.</p></dd>


<dt id="arg-min-number">min_number<a class="anchor" aria-label="anchor" href="#arg-min-number"></a></dt>
<dd><p>(numeric) the minimum number of variables to be included in
the model formulas to be generated.</p></dd>


<dt id="arg-min-continuous">min_continuous<a class="anchor" aria-label="anchor" href="#arg-min-continuous"></a></dt>
<dd><p>(numeric) the minimum number of continuous variables
required in a combination. Default is NULL.</p></dd>


<dt id="arg-weights">weights<a class="anchor" aria-label="anchor" href="#arg-weights"></a></dt>
<dd><p>(numeric) a numeric vector specifying weights for the
occurrence records. Default is NULL.</p></dd>


<dt id="arg-include-xy">include_xy<a class="anchor" aria-label="anchor" href="#arg-include-xy"></a></dt>
<dd><p>(logical) whether to include the coordinates (longitude and
latitude) in the results from preparing data. Default is TRUE.</p></dd>


<dt id="arg-write-pca">write_pca<a class="anchor" aria-label="anchor" href="#arg-write-pca"></a></dt>
<dd><p>(logical) whether to save the PCA-derived raster layers
(principal components) to disk. Default is FALSE.</p></dd>


<dt id="arg-pca-directory">pca_directory<a class="anchor" aria-label="anchor" href="#arg-pca-directory"></a></dt>
<dd><p>(character) the path or name of the folder where the PC
raster layers will be saved. This is only applicable if <code>write_pca = TRUE</code>.
Default is NULL.</p></dd>


<dt id="arg-write-file">write_file<a class="anchor" aria-label="anchor" href="#arg-write-file"></a></dt>
<dd><p>(logical) whether to write the resulting prepared_data list
in a local directory. Default is FALSE.</p></dd>


<dt id="arg-file-name">file_name<a class="anchor" aria-label="anchor" href="#arg-file-name"></a></dt>
<dd><p>(character) the path or name of the folder where the
resulting list will be saved. This is only applicable if <code>write_file = TRUE</code>. Default is NULL.</p></dd>


<dt id="arg-seed">seed<a class="anchor" aria-label="anchor" href="#arg-seed"></a></dt>
<dd><p>(numeric) integer value to specify an initial seed to split the
data. Default is 1.</p></dd>

</dl></div>
    <div id="value">
    <h2>Value</h2>
    <p>An object of class <code>prepared_data</code> containing all elements to run a model
calibration routine. The elements include: species, calibration data,
a grid of model parameters, indices of k-folds for cross validation,
xy coordinates, names of continuous and categorical variables, weights,
results from PCA, and modeling algorithm.</p>
    </div>

    <div id="ref-examples">
    <h2>Examples</h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="co"># Import user-prepared data</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="st">"user_data"</span>, package <span class="op">=</span> <span class="st">"kuenm2"</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Prepare data for maxnet model</span></span></span>
<span class="r-in"><span><span class="va">maxnet_swd_user</span> <span class="op">&lt;-</span> <span class="fu">prepare_user_data</span><span class="op">(</span>algorithm <span class="op">=</span> <span class="st">"maxnet"</span>,</span></span>
<span class="r-in"><span>                                     user_data <span class="op">=</span> <span class="va">user_data</span>, pr_bg <span class="op">=</span> <span class="st">"pr_bg"</span>,</span></span>
<span class="r-in"><span>                                     species <span class="op">=</span> <span class="st">"Myrcia hatschbachii"</span>,</span></span>
<span class="r-in"><span>                                     categorical_variables <span class="op">=</span> <span class="st">"SoilType"</span>,</span></span>
<span class="r-in"><span>                                     features <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"l"</span>, <span class="st">"q"</span>, <span class="st">"p"</span>, <span class="st">"lq"</span>, <span class="st">"lqp"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                                     r_multiplier <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0.1</span>, <span class="fl">1</span>, <span class="fl">2</span>, <span class="fl">3</span>, <span class="fl">5</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">maxnet_swd_user</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> prepared_data object summary</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ============================</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Species: Myrcia hatschbachii </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Number of Records: 527 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   - Presence: 51 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   - Background: 476 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Training-Testing Method:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   - k-fold Cross-validation: 4 folds</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Continuous Variables:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   - bio_1, bio_7, bio_12, bio_15 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Categorical Variables:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   - SoilType </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> PCA Information: PCA not performed</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Weights: No weights provided</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Calibration Parameters:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   - Algorithm: maxnet </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   - Number of candidate models: 610 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   - Features classes (responses): l, q, p, lq, lqp </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   - Regularization multipliers: 0.1, 1, 2, 3, 5 </span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Prepare data for glm model</span></span></span>
<span class="r-in"><span><span class="va">glm_swd_user</span> <span class="op">&lt;-</span> <span class="fu">prepare_user_data</span><span class="op">(</span>algorithm <span class="op">=</span> <span class="st">"glm"</span>,</span></span>
<span class="r-in"><span>                                  user_data <span class="op">=</span> <span class="va">user_data</span>, pr_bg <span class="op">=</span> <span class="st">"pr_bg"</span>,</span></span>
<span class="r-in"><span>                                  species <span class="op">=</span> <span class="st">"Myrcia hatschbachii"</span>,</span></span>
<span class="r-in"><span>                                  categorical_variables <span class="op">=</span> <span class="st">"SoilType"</span>,</span></span>
<span class="r-in"><span>                                  features <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"l"</span>, <span class="st">"q"</span>, <span class="st">"p"</span>, <span class="st">"lq"</span>, <span class="st">"lqp"</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">glm_swd_user</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> prepared_data object summary</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ============================</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Species: Myrcia hatschbachii </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Number of Records: 527 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   - Presence: 51 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   - Background: 476 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Training-Testing Method:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   - k-fold Cross-validation: 4 folds</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Continuous Variables:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   - bio_1, bio_7, bio_12, bio_15 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Categorical Variables:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   - SoilType </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> PCA Information: PCA not performed</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Weights: No weights provided</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Calibration Parameters:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   - Algorithm: glm </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   - Number of candidate models: 122 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   - Features classes (responses): l, q, p, lq, lqp </span>
</code></pre></div>
    </div>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by Marlon E. Cobos, Weverton Trindade, Luis F. Arias-Giraldo, Luis Osorio-Olvera, A. Townsend Peterson.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

      </footer></div>






  </body></html>

