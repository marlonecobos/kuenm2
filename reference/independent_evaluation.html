<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Evaluate models with independent data — independent_evaluation • kuenm2</title><script src="../lightswitch.js"></script><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Evaluate models with independent data — independent_evaluation"><meta name="description" content="This function evaluates the selected models using independent data (i.e.,
data not used during model calibration). The function computes omission rate
and pROC, and optionally assesses whether the environmental conditions in the
independent data are analogous (i.e., within the range) to those in the
calibration data."><meta property="og:description" content="This function evaluates the selected models using independent data (i.e.,
data not used during model calibration). The function computes omission rate
and pROC, and optionally assesses whether the environmental conditions in the
independent data are analogous (i.e., within the range) to those in the
calibration data."></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top " aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">kuenm2</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.0.11</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item"><a class="nav-link" href="../index.html"><span class="fa fa-home"></span></a></li>
<li class="active nav-item"><a class="nav-link" href="../reference/index.html">Functions</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true"><span class="fa fas fa-book"></span> Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/basic_data_cleaning.html">1. Basic Data Cleaning</a></li>
    <li><a class="dropdown-item" href="../articles/prepare_data.html">2. Prepare Data for Model Calibration</a></li>
    <li><a class="dropdown-item" href="../articles/model_calibration.html">3. Model Calibration</a></li>
    <li><a class="dropdown-item" href="../articles/model_exploration.html">4. Fit and Explore Selected Models</a></li>
    <li><a class="dropdown-item" href="../articles/model_predictions.html">5. Project Models to a Single Scenario</a></li>
    <li><a class="dropdown-item" href="../articles/model_projections.html">6. Project Models to Multiple Scenarios</a></li>
    <li><a class="dropdown-item" href="../articles/variability_and_uncertainty.html">7. Exploring Model Uncertainty and Variability</a></li>
    <li><a class="dropdown-item" href="../articles/projections_chelsa.html">8. Example of Projections Using CHELSA Data</a></li>
  </ul></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/marlonecobos/kuenm2/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-lightswitch" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true" aria-label="Light switch"><span class="fa fa-sun"></span></button>
  <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="dropdown-lightswitch"><li><button class="dropdown-item" data-bs-theme-value="light"><span class="fa fa-sun"></span> Light</button></li>
    <li><button class="dropdown-item" data-bs-theme-value="dark"><span class="fa fa-moon"></span> Dark</button></li>
    <li><button class="dropdown-item" data-bs-theme-value="auto"><span class="fa fa-adjust"></span> Auto</button></li>
  </ul></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Evaluate models with independent data</h1>
      <small class="dont-index">Source: <a href="https://github.com/marlonecobos/kuenm2/blob/main/R/independent_evaluation.R" class="external-link"><code>R/independent_evaluation.R</code></a></small>
      <div class="d-none name"><code>independent_evaluation.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>This function evaluates the selected models using independent data (i.e.,
data not used during model calibration). The function computes omission rate
and pROC, and optionally assesses whether the environmental conditions in the
independent data are analogous (i.e., within the range) to those in the
calibration data.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">independent_evaluation</span><span class="op">(</span><span class="va">fitted_models</span>, <span class="va">new_data</span>,</span>
<span>                              consensus <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"mean"</span>, <span class="st">"median"</span><span class="op">)</span>,</span>
<span>                              type <span class="op">=</span> <span class="st">"cloglog"</span>, extrapolation_type <span class="op">=</span> <span class="st">"E"</span>,</span>
<span>                              var_to_clamp <span class="op">=</span> <span class="cn">NULL</span>, perform_mop <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>                              mop_type <span class="op">=</span> <span class="st">"detailed"</span>,</span>
<span>                              calculate_distance <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>                              where_distance <span class="op">=</span> <span class="st">"all"</span>,</span>
<span>                              return_predictions <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>                              return_binary <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>                              progress_bar <span class="op">=</span> <span class="cn">FALSE</span>, <span class="va">...</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-fitted-models">fitted_models<a class="anchor" aria-label="anchor" href="#arg-fitted-models"></a></dt>
<dd><p>an object of class <code>fitted_models</code> returned by the
<code><a href="fit_selected.html">fit_selected</a></code>() function.</p></dd>


<dt id="arg-new-data">new_data<a class="anchor" aria-label="anchor" href="#arg-new-data"></a></dt>
<dd><p>a <code>data.frame</code> containing environmental variables for
independent test records. The column names must correspond exactly to the
environmental variables used to fit the selected models, and each row to an
individual test record.</p></dd>


<dt id="arg-consensus">consensus<a class="anchor" aria-label="anchor" href="#arg-consensus"></a></dt>
<dd><p>(character) vector specifying the types of consensus to
use. Available options are <code>"median"</code> and <code>"mean"</code>. Default is
<code>c("median", "mean")</code>.</p></dd>


<dt id="arg-type">type<a class="anchor" aria-label="anchor" href="#arg-type"></a></dt>
<dd><p>(character) the format of prediction values. For <code>maxnet</code> models,
valid options are <code>"raw"</code>, <code>"cumulative"</code>, <code>"logistic"</code>, and <code>"cloglog"</code>. For
<code>glm</code> models, valid options are <code>"response"</code> and <code>"cloglog"</code>. Default is
<code>"cloglog"</code>.</p></dd>


<dt id="arg-extrapolation-type">extrapolation_type<a class="anchor" aria-label="anchor" href="#arg-extrapolation-type"></a></dt>
<dd><p>(character) extrapolation type of model. Models can
be transferred with three options: free extrapolation ('E'), extrapolation
with clamping ('EC'), and no extrapolation ('NE'). Default = 'E'. See details.</p></dd>


<dt id="arg-var-to-clamp">var_to_clamp<a class="anchor" aria-label="anchor" href="#arg-var-to-clamp"></a></dt>
<dd><p>(character) vector specifying which variables to clamp or
not extrapolate. Only applicable if extrapolation_type is "EC" or "NE".
Default is <code>NULL</code>, meaning all variables will be clamped or not extrapolated.</p></dd>


<dt id="arg-perform-mop">perform_mop<a class="anchor" aria-label="anchor" href="#arg-perform-mop"></a></dt>
<dd><p>(logical) whether to execute a Mobility-Oriented Parity
(MOP) analysis. This analysis assesses if the environmental conditions in the
<code>new_data</code> are analogous (within ranges) to those in the calibration data.
Defaults to <code>TRUE</code>.</p></dd>


<dt id="arg-mop-type">mop_type<a class="anchor" aria-label="anchor" href="#arg-mop-type"></a></dt>
<dd><p>(character) type of MOP analysis to be performed. Options
available are "basic", "simple" and "detailed". Default is 'simples'. See
<code><a href="projection_mop.html">projection_mop</a></code>() for more details.</p></dd>


<dt id="arg-calculate-distance">calculate_distance<a class="anchor" aria-label="anchor" href="#arg-calculate-distance"></a></dt>
<dd><p>(logical) whether to calculate distances
(dissimilarities) between new_data and calibration data. Default is TRUE.</p></dd>


<dt id="arg-where-distance">where_distance<a class="anchor" aria-label="anchor" href="#arg-where-distance"></a></dt>
<dd><p>(character) specifies which values in <code>new_data</code> should
be used to calculate distances. Options are: "in_range" (only conditions
within the calibration range), "out_range" (only conditions outside the
calibration range), and "all" (all conditions). Default is "all".</p></dd>


<dt id="arg-return-predictions">return_predictions<a class="anchor" aria-label="anchor" href="#arg-return-predictions"></a></dt>
<dd><p>(logical) whether to return continuous predictions
at the locations of independent records in <code>new_data</code>. Default is TRUE.</p></dd>


<dt id="arg-return-binary">return_binary<a class="anchor" aria-label="anchor" href="#arg-return-binary"></a></dt>
<dd><p>(logical) whether to return binary predictions
at the locations of independent records in <code>new_data</code>. The predictions are
binarized using the respective thresholds stores in <code>fitted_models</code>. Default
is TRUE.</p></dd>


<dt id="arg-progress-bar">progress_bar<a class="anchor" aria-label="anchor" href="#arg-progress-bar"></a></dt>
<dd><p>(logical) whether to display a progress bar during
mop processing. Default is FALSE.</p></dd>


<dt id="arg--">...<a class="anchor" aria-label="anchor" href="#arg--"></a></dt>
<dd><p>additional arguments passed to <code><a href="https://rdrr.io/pkg/mop/man/mop.html" class="external-link">mop()</a></code>.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>A list containing the following elements:</p><ul><li><p><strong>evaluation</strong>: A <code>data.frame</code> with omission rate and pROC values for each
selected model and for the consensus.</p></li>
<li><p><strong>mop_results</strong>: (Only if <code>perform_mop = TRUE</code>) An object of class
<code>mop_results</code>, with metrics of environmental similarity between calibration
and independent data.</p></li>
<li><p><strong>predictions</strong>: (Only if <code>return_predictions = TRUE</code>) A <code>list</code> of
<code>data.frames</code> containing continuous and binary predictions at the independent
record locations, along with MOP distances, an indicator of whether
environmental conditions at each location fall within the calibration range,
and the identity of the variables that have lower and higher values than the
calibration range. If the <code>fitted_models</code> object includes categorical
variables, the returned <code>data.frame</code> will also contain columns indicating
which values in <code>new_data</code> were not present in the calibration data.</p></li>
</ul></div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="co"># Example with maxnet</span></span></span>
<span class="r-in"><span><span class="co"># Import example of fitted_models (output of fit_selected())</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="st">"fitted_model_maxnet"</span>, package <span class="op">=</span> <span class="st">"kuenm2"</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Import independent records to evaluate the models</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="st">"new_occ"</span>, package <span class="op">=</span> <span class="st">"kuenm2"</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Import raster layers</span></span></span>
<span class="r-in"><span><span class="va">var</span> <span class="op">&lt;-</span> <span class="fu">terra</span><span class="fu">::</span><span class="fu"><a href="https://rspatial.github.io/terra/reference/rast.html" class="external-link">rast</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"extdata"</span>, <span class="st">"Current_variables.tif"</span>,</span></span>
<span class="r-in"><span>                               package <span class="op">=</span> <span class="st">"kuenm2"</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">#Extract variables to occurrences</span></span></span>
<span class="r-in"><span><span class="va">new_data</span> <span class="op">&lt;-</span> <span class="fu"><a href="extract_occurrence_variables.html">extract_occurrence_variables</a></span><span class="op">(</span>occ <span class="op">=</span> <span class="va">new_occ</span>, x <span class="op">=</span> <span class="st">"x"</span>, y <span class="op">=</span> <span class="st">"y"</span>,</span></span>
<span class="r-in"><span>                                         raster_variables <span class="op">=</span> <span class="va">var</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">#Add some fake data beyond the limits of calibration ranges</span></span></span>
<span class="r-in"><span><span class="va">fake_data</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span><span class="st">"pr_bg"</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">1</span>, <span class="fl">1</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                        <span class="st">"x"</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="cn">NA</span>, <span class="cn">NA</span>, <span class="cn">NA</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                        <span class="st">"y"</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="cn">NA</span>, <span class="cn">NA</span>, <span class="cn">NA</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                        <span class="st">"bio_1"</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">10</span>, <span class="fl">15</span>, <span class="fl">23</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                        <span class="st">"bio_7"</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">12</span>, <span class="fl">16</span>, <span class="fl">20</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                        <span class="st">"bio_12"</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">2300</span>, <span class="fl">2000</span>, <span class="fl">1000</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                        <span class="st">"bio_15"</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">30</span>, <span class="fl">40</span>, <span class="fl">50</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                        <span class="st">"SoilType"</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">1</span>, <span class="fl">1</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">new_data</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/cbind.html" class="external-link">rbind</a></span><span class="op">(</span><span class="va">new_data</span>, <span class="va">fake_data</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Evaluate models with independent data</span></span></span>
<span class="r-in"><span><span class="va">res_ind</span> <span class="op">&lt;-</span> <span class="fu">independent_evaluation</span><span class="op">(</span>fitted_models <span class="op">=</span> <span class="va">fitted_model_maxnet</span>,</span></span>
<span class="r-in"><span>                                  new_data <span class="op">=</span> <span class="va">new_data</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Weverton C. F. Trindade, Luis F. Arias-Giraldo, Luis Osorio-Olvera, A. Townsend Peterson, Marlon E. Cobos.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.2.0.</p>
</div>

    </footer></div>





  </body></html>

