<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Predict selected models for a single scenario — predict_selected • kuenm2</title><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js" integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g==" crossorigin="anonymous" referrerpolicy="no-referrer"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/cosmo/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><meta property="og:title" content="Predict selected models for a single scenario — predict_selected"><meta property="og:description" content="This function predicts selected models for a single set of new data
using either maxnet or glm It provides options to save the
output and compute consensus results (mean, median, etc.) across
replicates and models."><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body data-spy="scroll" data-target="#toc">


    <div class="container template-reference-topic">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">kuenm2</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.0.10</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../index.html">
    <span class="fa fa-home"></span>

  </a>
</li>
<li>
  <a href="../reference/index.html">Functions</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    <span class="fas fa-book"></span>

    Articles

    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu"><li>
      <a href="../articles/basic_bata_cleaning.html">1. Occurrence Data Cleaning</a>
    </li>
    <li>
      <a href="../articles/prepare_data.html">2. Prepare Data for Model Calibration</a>
    </li>
    <li>
      <a href="../articles/model_calibration.html">3. Model Calibration</a>
    </li>
    <li>
      <a href="../articles/model_exploration.html">4. Fit and Explore Selected Models</a>
    </li>
    <li>
      <a href="../articles/model_predictions.html">5. Predict models to single scenario</a>
    </li>
    <li>
      <a href="../articles/model_projections.html">6. Project models to multiple scenarios</a>
    </li>
  </ul></li>
      </ul><ul class="nav navbar-nav navbar-right"></ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->



      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Predict selected models for a single scenario</h1>

    <div class="hidden name"><code>predict_selected.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>This function predicts selected models for a single set of new data
using either <code>maxnet</code> or <code>glm</code> It provides options to save the
output and compute consensus results (mean, median, etc.) across
replicates and models.</p>
    </div>

    <div id="ref-usage">
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">predict_selected</span><span class="op">(</span><span class="va">models</span>, <span class="va">raster_variables</span>, mask <span class="op">=</span> <span class="cn">NULL</span>, write_files <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>                 write_replicates <span class="op">=</span> <span class="cn">FALSE</span>, out_dir <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>                 consensus_per_model <span class="op">=</span> <span class="cn">TRUE</span>, consensus_general <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>                 consensus <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"median"</span>, <span class="st">"range"</span>, <span class="st">"mean"</span>, <span class="st">"stdev"</span><span class="op">)</span>,</span>
<span>                 extrapolation_type <span class="op">=</span> <span class="st">"E"</span>, var_to_clamp <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>                 type <span class="op">=</span> <span class="cn">NULL</span>, overwrite <span class="op">=</span> <span class="cn">FALSE</span>, progress_bar <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div id="arguments">
    <h2>Arguments</h2>


<dl><dt id="arg-models">models<a class="anchor" aria-label="anchor" href="#arg-models"></a></dt>
<dd><p>an object of class <code>fitted_models</code> returned by the
<code><a href="fit_selected.html">fit_selected</a></code>() function.</p></dd>


<dt id="arg-raster-variables">raster_variables<a class="anchor" aria-label="anchor" href="#arg-raster-variables"></a></dt>
<dd><p>a SpatRaster or data.frame of predictor variables.
The names of these variables must match those used to calibrate the models or
those used to run PCA if <code>do_pca = TRUE</code> in the <code><a href="prepare_data.html">prepare_data</a></code>()
function.</p></dd>


<dt id="arg-mask">mask<a class="anchor" aria-label="anchor" href="#arg-mask"></a></dt>
<dd><p>(SpatRaster, SpatVector, or SpatExtent) spatial object used to
mask the variables before predict. Default is NULL.</p></dd>


<dt id="arg-write-files">write_files<a class="anchor" aria-label="anchor" href="#arg-write-files"></a></dt>
<dd><p>(logical) whether to save the predictions (SpatRasters or
data.frame) to disk. Default is FALSE.</p></dd>


<dt id="arg-write-replicates">write_replicates<a class="anchor" aria-label="anchor" href="#arg-write-replicates"></a></dt>
<dd><p>(logical) whether to save the predictions for each
replicate to disk. Only applicable if <code>write_files</code> is TRUE. Default is
FALSE.</p></dd>


<dt id="arg-out-dir">out_dir<a class="anchor" aria-label="anchor" href="#arg-out-dir"></a></dt>
<dd><p>(character) directory path where predictions will be saved.
Only relevant if <code>write_files = TRUE</code>.</p></dd>


<dt id="arg-consensus-per-model">consensus_per_model<a class="anchor" aria-label="anchor" href="#arg-consensus-per-model"></a></dt>
<dd><p>(logical) whether to compute consensus (mean,
median, etc.) for each model across its replicates. Default is TRUE.</p></dd>


<dt id="arg-consensus-general">consensus_general<a class="anchor" aria-label="anchor" href="#arg-consensus-general"></a></dt>
<dd><p>(logical) whether to compute a general consensus
across all models. Default is TRUE.</p></dd>


<dt id="arg-consensus">consensus<a class="anchor" aria-label="anchor" href="#arg-consensus"></a></dt>
<dd><p>(character) vector specifying the types of consensus to
calculate across replicates and models. Available options are <code>"median"</code>,
<code>"range"</code>, <code>"mean"</code>, and <code>"stdev"</code> (standard deviation). Default is
<code>c("median", "range", "mean", "stdev")</code>.</p></dd>


<dt id="arg-extrapolation-type">extrapolation_type<a class="anchor" aria-label="anchor" href="#arg-extrapolation-type"></a></dt>
<dd><p>(character) extrapolation type of model. Models can
be transferred with three options: free extrapolation ('E'), extrapolation
with clamping ('EC'), and no extrapolation ('NE'). Default = 'E'. See details.</p></dd>


<dt id="arg-var-to-clamp">var_to_clamp<a class="anchor" aria-label="anchor" href="#arg-var-to-clamp"></a></dt>
<dd><p>(character) vector specifying which variables to clamp or
not extrapolate. Only applicable if extrapolation_type is "EC" or "NE".
Default is <code>NULL</code>, meaning all variables will be clamped or not extrapolated.</p></dd>


<dt id="arg-type">type<a class="anchor" aria-label="anchor" href="#arg-type"></a></dt>
<dd><p>(character) the format of prediction values. For <code>maxnet</code> models,
valid options are <code>"raw"</code>, <code>"cumulative"</code>, <code>"logistic"</code>, and <code>"cloglog"</code>. For
<code>glm</code> models, valid options are <code>"response"</code> and <code>"raw"</code>. If <code>NULL</code> (default),
the function uses <code>"cloglog"</code> for <code>maxnet</code> models and <code>"response"</code> for <code>glm</code>
models.</p></dd>


<dt id="arg-overwrite">overwrite<a class="anchor" aria-label="anchor" href="#arg-overwrite"></a></dt>
<dd><p>(logical) whether to overwrite SpatRasters if they already
exist. Only applicable if <code>write_files = TRUE</code>. Default is FALSE.</p></dd>


<dt id="arg-progress-bar">progress_bar<a class="anchor" aria-label="anchor" href="#arg-progress-bar"></a></dt>
<dd><p>(logical) whether to display a progress bar during
processing. Default is TRUE.</p></dd>

</dl></div>
    <div id="value">
    <h2>Value</h2>
    <p>A list containing SpatRaster or data.frames predictions for each replicate,
long with the consensus results for each model and the overall general consensus.</p>
    </div>
    <div id="details">
    <h2>Details</h2>
    <p>When predicting to areas where the variables are beyond the lower or upper
limits of the calibration data, users can choose to free extrapolate the
predictions (<code>extrapolation_type = "E"</code>), extrapolate with clamping
(extrapolation_type = "EC"), or not extrapolate (extrapolation_type = "NE").
When clamping, the variables are set to minimum and maximum values
established for the maximum and minimum values within calibration data. In
the no extrapolation approach, any cell with at least one variable listed in
<code>var_to_clamp</code> falling outside the calibration range is assigned a suitability
value of 0.</p>
    </div>

    <div id="ref-examples">
    <h2>Examples</h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="co"># Import variables to predict on</span></span></span>
<span class="r-in"><span><span class="va">var</span> <span class="op">&lt;-</span> <span class="fu">terra</span><span class="fu">::</span><span class="fu"><a href="https://rspatial.github.io/terra/reference/rast.html" class="external-link">rast</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"extdata"</span>, <span class="st">"Current_variables.tif"</span>,</span></span>
<span class="r-in"><span>                               package <span class="op">=</span> <span class="st">"kuenm2"</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Example with maxnet</span></span></span>
<span class="r-in"><span><span class="co"># Import example of fitted_models (output of fit_selected())</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="st">"fitted_model_maxnet"</span>, package <span class="op">=</span> <span class="st">"kuenm2"</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Predict to single scenario</span></span></span>
<span class="r-in"><span><span class="va">p</span> <span class="op">&lt;-</span> <span class="fu">predict_selected</span><span class="op">(</span>models <span class="op">=</span> <span class="va">fitted_model_maxnet</span>, raster_variables <span class="op">=</span> <span class="va">var</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   |                                                                              |                                                                      |   0%  |                                                                              |===================================                                   |  50%  |                                                                              |======================================================================| 100%</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Example with GLMs</span></span></span>
<span class="r-in"><span><span class="co"># Import example of fitted_models (output of fit_selected())</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="st">"fitted_model_glm"</span>, package <span class="op">=</span> <span class="st">"kuenm2"</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Predict to single scenario</span></span></span>
<span class="r-in"><span><span class="va">p_glm</span> <span class="op">&lt;-</span> <span class="fu">predict_selected</span><span class="op">(</span>models <span class="op">=</span> <span class="va">fitted_model_glm</span>, raster_variables <span class="op">=</span> <span class="va">var</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   |                                                                              |                                                                      |   0%  |                                                                              |======================================================================| 100%</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Plot predictions</span></span></span>
<span class="r-in"><span><span class="fu">terra</span><span class="fu">::</span><span class="fu"><a href="https://rspatial.github.io/terra/reference/plot.html" class="external-link">plot</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="va">p</span><span class="op">$</span><span class="va">General_consensus</span><span class="op">$</span><span class="va">median</span>, <span class="va">p_glm</span><span class="op">$</span><span class="va">General_consensus</span><span class="op">$</span><span class="va">median</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>            col <span class="op">=</span> <span class="fu"><a href="https://rspatial.github.io/terra/reference/flip.html" class="external-link">rev</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/grDevices/palettes.html" class="external-link">terrain.colors</a></span><span class="op">(</span><span class="fl">240</span><span class="op">)</span><span class="op">)</span>, main <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"MAXNET"</span>, <span class="st">"GLM"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>            zlim <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">1</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-plt img"><img src="predict_selected-1.png" alt="" width="700" height="433"></span>
</code></pre></div>
    </div>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by Marlon E. Cobos, Weverton Trindade, Luis F. Arias-Giraldo, Luis Osorio-Olvera, A. Townsend Peterson.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

      </footer></div>






  </body></html>

